import{s as E,f as g}from"./loadingTransition-DJRud9zi.js";import{S as h,p,g as d,a as A}from"./main-9aNdwre9.js";import{i as I,m as k}from"./slider-OtOgIfbY.js";import{S}from"./SplitText-Cpc1cBKW.js";function q(){const i=new URLSearchParams(window.location.search).get("id");return i?decodeURIComponent(i):""}function B(t,i){if(!i)return null;for(const n of Object.values(t)){const r=n?.cards;if(!Array.isArray(r))continue;const o=r.find(a=>String(a.id)===String(i));if(o)return o}return null}function y(t){return t?typeof t=="string"?t.trim().length>0:typeof t=="object"?typeof t.src=="string"&&t.src.trim().length>0:!1:!1}async function L(){E(),document.body.classList.add("is-loading-detail");try{const t=q(),i=await fetch("./src/data/vriendenwijken.json");if(!i.ok)throw new Error("Failed to load vriendenwijken.json");const n=await i.json(),r=n.defaultDetail??{},o=B(n,t),a={title:o?.title??r.title??"Vriendenwijk",description:o?.description??r.description??"",mapEmbedUrl:o?.mapEmbedUrl??r.mapEmbedUrl??"",sliderImages:o?.sliderImages??r.sliderImages??[]},e=document.querySelector(".detail__container");if(!e)throw new Error("Missing .detail__container");const l=e.querySelector(".detail__title");l&&(l.textContent=a.title);const s=e.querySelector("#description p");s&&(s.textContent=a.description);const u=e.querySelector("#location iframe");u&&a.mapEmbedUrl&&(u.src=a.mapEmbedUrl);const c=e.querySelector(".slider");c&&Array.isArray(a.sliderImages)&&a.sliderImages.some(y)&&(c.innerHTML="",a.sliderImages.filter(y).forEach((f,w)=>{const b=typeof f=="string"?f:f.src,_=typeof f=="string"?"":f.alt??"",m=document.createElement("img");m.className=`slider__item item-${w+1}`,m.src=b,m.alt=_,c.appendChild(m)})),await g("is-loading-detail",350),h.refresh()}catch(t){console.error(t),await g("is-loading-detail",350),h.refresh()}}function v(){const t=document.querySelectorAll(".button--detail-content"),i=document.querySelectorAll(".detail__section");let n=null;if(!t.length||!i.length)return;t.forEach(e=>{e.addEventListener("click",l=>{l.preventDefault();const s=e.dataset.target;if(!s)return;t.forEach(c=>{c.classList.remove("is-active"),o(c,!1),a(c,!1)}),e.classList.add("is-active"),o(e,!0),a(e,!0);const u=document.getElementById(s);u&&r(u)})}),t[0]&&t[0].click();function r(e){n!==e&&(n&&(n.classList.add("hidden"),p()||d.to(n,{autoAlpha:0,y:20,duration:.25})),e.classList.remove("hidden"),p()||d.fromTo(e,{autoAlpha:0,y:-20},{autoAlpha:1,y:0,duration:.35,ease:"power2.out"}),n=e)}function o(e,l){const s=e.querySelector(".button__bubble");s&&d.to(s,{scale:l?1:0,opacity:l?1:0,duration:.35,ease:l?"back.out(1.7)":"power1.inOut"})}function a(e,l){const s=e.querySelector("svg path");s&&d.to(s,{stroke:l?"#BAC8B1":"#404E3B",duration:.35,ease:"power1.inOut"})}}d.registerPlugin(S);function C(){if(p())return;const t=document.querySelector(".detail__title");if(!t||t.querySelector(".char"))return;const i=A(),n=i==="mobile"||i==="tablet",r=d.timeline({defaults:{ease:"power1.out"}}),o=new S(t,{type:"words, chars"});n?r.from(".detail__slider",{scale:1.02,autoAlpha:0,duration:.6}):r.from(".slider__item",{scale:1.05,autoAlpha:0,duration:.6,stagger:.15}),r.from(o.chars,{y:20,autoAlpha:0,duration:.4,stagger:.02,ease:"back.out(2.5)"},"-=0.35"),r.from(".button--detail-content",{y:15,autoAlpha:0,duration:.4,stagger:.12},"-=0.25"),r.from(".detail__section:not(.hidden) > *",{y:-20,autoAlpha:0,duration:.35},"-=0.2")}async function M(){console.log("Initializing detail page animations..."),await L(),C(),I(),v(),k()}export{M as default};
