import{s as S,f as w}from"./loadingTransition-DJRud9zi.js";import{S as f,g as c,p as g}from"./main-QwuYxxyY.js";import{S as p}from"./SplitText-Cpc1cBKW.js";import{i as _}from"./scrollTo-DxuTIY9L.js";async function A(){const r=document.querySelector("#overview-card-template");if(r){document.body.classList.add("is-loading-overview"),S();try{const e=await fetch("/src/data/vriendenwijken.json");if(!e.ok)throw new Error("Failed to load card data");const i=await e.json(),d=[],s=280;Object.entries(i).forEach(([a,l])=>{const o=document.getElementById(`cards-${a}`);if(!o||!l?.cards)return;o.querySelectorAll(".card--overview").forEach(t=>t.remove());const u=document.createDocumentFragment();l.cards.forEach(t=>{const n=r.content.cloneNode(!0),m=n.querySelector(".card__img");m.src=t.image,m.alt=t.alt,d.push(m),n.querySelector(".detail-link-title").textContent=t.title,n.querySelector(".card__link").href=`detail.html?id=${encodeURIComponent(t.id)}`,n.querySelector(".card__address").innerHTML=`<strong>Adres:</strong> ${t.address}`;const h=n.querySelector(".card__features");t.features.forEach(y=>{const v=document.createElement("li");v.textContent=y,h.appendChild(v)}),u.appendChild(n)}),o.appendChild(u)}),await Promise.all(d.map(a=>a.complete?Promise.resolve():new Promise(l=>{a.addEventListener("load",l,{once:!0}),a.addEventListener("error",l,{once:!0})}))),await w("is-loading-overview",350),await new Promise(a=>{window.setTimeout(()=>{document.querySelectorAll(".overview-skeleton__header, .overview-skeleton__card, .divider-skeleton").forEach(l=>l.remove()),a()},s+50)}),f.refresh()}catch(e){console.error(e),await w("is-loading-overview",350),f.refresh()}}}function E(){if(window.matchMedia("(hover: hover) and (pointer: fine)").matches===!1)return;document.querySelectorAll(".detail-link").forEach(e=>{const i=e.querySelector(".detail-link-title"),d=e.querySelector(".detail-link-arrow");if(!i||!d)return;const s=c.timeline({paused:!0});s.to(i,{scale:1,opacity:1,duration:.3,ease:"power2.out"}),s.fromTo(d,{x:-16,opacity:0},{x:0,opacity:1,duration:.3,ease:"power2.out"},"-=0.3"),i.addEventListener("mouseenter",()=>s.play()),i.addEventListener("mouseleave",()=>s.reverse())})}c.registerPlugin(p,f);function k(){const r=document.querySelector("#overview");if(!r||g())return;const e=c.timeline({scrollTrigger:{trigger:r,start:"top 75%",toggleActions:"play none none none",markers:!1,once:!0}});r.querySelector(".overview__title .word")||document.fonts.ready.then(()=>{const i=p.create(".overview__title",{type:"words",wordsClass:"overview-title-word",ignore:".mobile-br"});e.from(i.words,{y:-100,rotation:"random(-20, 20)",duration:.7,ease:"back",stagger:.15,autoAlpha:0})})}function q(){if(g())return;const r=document.querySelectorAll(".divider");r.length&&r.forEach((e,i)=>{const d=i===0,[s,a]=e.querySelectorAll(".divider__line"),l=e.querySelector(".divider__title");let o=e.nextElementSibling;for(;o&&!o.classList.contains("overview__cards");)o=o.nextElementSibling;const u=o?o.querySelectorAll(".card--overview"):[],t=o?.nextElementSibling?.classList.contains("link")?o.nextElementSibling:null;c.set(s,{autoAlpha:0,scaleX:0,transformOrigin:"right"}),c.set(a,{autoAlpha:0,scaleX:0,transformOrigin:"left"}),u.length&&c.set(u,{autoAlpha:0,y:50}),t&&c.set(t,{autoAlpha:0,y:20});const n=c.timeline({scrollTrigger:{trigger:e,start:"top 75%",toggleActions:"play none none none",markers:!1,once:!0}});d&&n.to({},{duration:.5}),n.from(l,{autoAlpha:0,y:10,duration:.3,ease:"power1.out"}),n.to([s,a],{scaleX:1,autoAlpha:1,duration:.3,ease:"power1.out"},"-=0.1"),u.length&&n.to(u,{autoAlpha:1,y:0,duration:.5,ease:"power1.out",stagger:.2}),t&&n.to(t,{autoAlpha:1,y:0,duration:.25,ease:"power1.out"},"-=0.1")})}function L(){return new Promise(r=>requestAnimationFrame(()=>r()))}async function O(){document.body.classList.add("is-overview-animating"),await A(),console.log("Initializing overview page animations..."),E(),k(),q(),_(),await L(),document.body.classList.remove("is-overview-animating")}export{O as default};
